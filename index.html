<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="AI Island - An interactive 3D world simulation for AI training and D&D gameplay">
  <meta name="keywords" content="AI simulation, D&D, 3D world, isometric, game">
  <meta name="author" content="AI Island">
  <title>AI Island - Interactive World Simulation</title>

  <!-- Preconnect to Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <!-- Styles -->
  <link rel="stylesheet" href="css/index.css">
</head>

<body>
  <!-- Top Bar -->
  <div class="top-bar">
    <div style="display: flex; align-items: center; gap: 8px;">
      <button id="toggle-scene" class="icon-btn active" title="Scene Panel">
        ğŸŒ²
      </button>
      <div class="title">AI Island</div>
    </div>

    <div style="display: flex; align-items: center; gap: 8px;">
      <!-- Testing -->
      <button id="run-tests-btn" class="icon-btn" title="Run Tests">ğŸ§ª</button>
      <div style="width: 1px; height: 24px; background: rgba(255,255,255,0.1); margin: 0 4px;"></div>

      <!-- RPG Panel Buttons -->
      <button id="types-btn" class="icon-btn" title="Types (GM)">ğŸ“¦</button>
      <button id="characters-btn" class="icon-btn" title="Characters">ğŸ‘¥</button>
      <button id="inventory-btn" class="icon-btn" title="Inventory">ğŸ’</button>

      <div style="width: 1px; height: 24px; background: rgba(255,255,255,0.1); margin: 0 4px;"></div>

      <button id="toggle-properties" class="icon-btn active" title="Properties">
        â˜°
      </button>

      <div style="width: 1px; height: 24px; background: rgba(255,255,255,0.1); margin: 0 4px;"></div>

      <button id="combat-btn" class="icon-btn danger" title="Start Combat">âš”ï¸</button>
    </div>
  </div>

  <!-- Turn Indicator Overlay -->
  <div id="turn-indicator" class="turn-indicator hidden">
    <div class="turn-phase">COMBAT PHASE</div>
    <div class="turn-active">Current: <span id="active-entity-name">--</span></div>
  </div>

  <!-- Main Container with Grid Layout -->
  <div class="main-container">
    <!-- Left Panel: Scene Panel -->
    <aside class="left-panel scene-panel">
      <div class="panel-header">Scene</div>
      <div class="scene-tree" id="scene-tree">
        <!-- Tree will be populated by JavaScript -->
      </div>
    </aside>

    <!-- Center: Canvas Container -->
    <main class="canvas-container">
      <canvas id="world-canvas"></canvas>

      <!-- Build Toolbar (existing) -->
      <div class="build-toolbar hidden"></div>

      <!-- Canvas Overlay -->
      <div class="canvas-overlay">
        <div class="canvas-control">
          <span>ğŸ–±ï¸ Drag to pan â€¢ ğŸ–±ï¸ Scroll to zoom â€¢ ğŸ–±ï¸ Click to select</span>
        </div>
      </div>
    </main>

    <!-- Right Panel: Properties Panel -->
    <aside class="right-panel properties-panel">
      <div class="panel-header">Properties</div>
      <div id="properties-content" class="properties-content">
        <p class="text-muted">Select an item to view properties</p>
      </div>
    </aside>
  </div>

  <!-- Floating Status Footer -->
  <div class="status-footer">
    <div id="connection-status">Offline</div>
    <div class="status-dot" id="status-dot"></div>
    <span class="separator">â€¢</span>
    <div id="fps-counter">FPS: --</div>
    <span class="separator">â€¢</span>
    <div id="last-update">Sync: --</div>
  </div>

  <!-- Tooltip -->
  <div class="tooltip" id="tooltip"></div>

  <!-- Scripts -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <script type="module" src="js/main.js"></script>
</body>

</html>